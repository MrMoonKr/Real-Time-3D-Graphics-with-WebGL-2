<html>

<head>
    <title>Real-Time 3D Graphics with WebGL2</title>
    <link rel="shortcut icon" type="image/png" href="/common/images/favicon.png" />

    <!-- libraries -->
    <link rel="stylesheet" href="/common/lib/normalize.css">
    <!-- <script type="text/javascript" src="/common/lib/dat.gui.js"></script>
    <script type="text/javascript" src="/common/lib/gl-matrix.js"></script> -->

    <!-- modules -->
    <!-- <script type="text/javascript" src="/common/js/utils.js"></script>
    <script type="text/javascript" src="/common/js/EventEmitter.js"></script>
    <script type="text/javascript" src="/common/js/Program.js"></script>
    <script type="text/javascript" src="/common/js/Scene.js"></script>
    <script type="text/javascript" src="/common/js/Floor.js"></script>
    <script type="text/javascript" src="/common/js/Camera.js"></script>
    <script type="text/javascript" src="/common/js/Light.js"></script>
    <script type="text/javascript" src="/common/js/Texture.js"></script>
    <script type="text/javascript" src="/common/js/Clock.js"></script>
    <script type="text/javascript" src="/common/js/Controls.js"></script>
    <script type="text/javascript" src="/common/js/Transforms.js"></script> -->

    <script id="vertex-shader" type="x-shader/x-vertex">
        #version 300 es
        precision mediump float;

        uniform bool uUseVertexColor;
        uniform vec4 uMaterialDiffuse;
        uniform vec4 uMaterialAmbient;
        uniform float uAlpha;
        uniform mat4 uModelViewMatrix;
        uniform mat4 uProjectionMatrix;
        uniform mat4 uNormalMatrix;
        uniform vec3 uLightPosition;
        uniform vec4 uLightAmbient;
        uniform vec4 uLightDiffuse;
        uniform bool uUseLambert;

        in vec3 aVertexPosition;
        in vec3 aVertexNormal;
        in vec4 aVertexColor;
        in vec2 aVertexTextureCoords;

        out vec4 vColor;
        out vec2 vTextureCoords;

        void main(void) 
        {
            vec4 vertex = uModelViewMatrix * vec4(aVertexPosition, 1.0);
            float lambertTerm = 1.0;

            if (uUseLambert) {
                vec3 normal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));
                vec3 lightDirection = normalize(-uLightPosition);
                lambertTerm = max(dot(normal, -lightDirection), 0.20);
            }

            vec4 Ia = uLightAmbient * uMaterialAmbient;
            vec4 Id = vec4(0.0);

            if (uUseVertexColor) {
                Id = uLightDiffuse * aVertexColor * lambertTerm;
            }
            else {
                Id = uLightDiffuse * uMaterialDiffuse * lambertTerm;
            }

            vColor = vec4(vec3(Ia + Id), uAlpha);
            vTextureCoords = aVertexTextureCoords;
            gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aVertexPosition, 1.0);
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        #version 300 es
        precision mediump float;

        uniform vec4 uMaterialDiffuse;
        uniform bool uWireframe;
        uniform sampler2D uSampler;

        in vec4 vColor;
        in vec2 vTextureCoords;

        out vec4 fragColor;

        void main(void) 
        {
            fragColor = vColor * texture(uSampler, vTextureCoords);
        }
    </script>

    <script type="text/javascript" src="../dist/ch07/ch07_02_textured_cube_final.bundle.js"></script>
</head>

<body>

    <canvas id="webgl-canvas">
        Your browser does not support the HTML5 canvas element.
    </canvas>

</body>

</html>